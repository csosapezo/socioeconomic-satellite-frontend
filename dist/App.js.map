{"version":3,"sources":["../src/App.js"],"names":["App","props","idx","setState","selectedIdx","coords","newState","_northEast","lat","_southWest","lng","sidebar_coords","clean","document","getElementById","className","cleanState","images","maskArray","mask_bounds","classList","remove","path","then","res","image_data","data","image","bbDict","bounding_box","bottom","left","top","right","masks","state","is_located","prediction","value","initialState","cleanAll","selectImage","selectArea","hoverEnter","squareCoords","React","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Sidebar from './components/sidebar'\nimport Map from './components/map'\nimport './App.css'\nimport {doSearchImages} from \"./dataAccess/searchImages\";\nimport {doCheckFiles} from \"./dataAccess/checkFiles\";\nimport {doPredict} from \"./dataAccess/predict\";\n\nclass App extends React.Component {\n\n  constructor(props) {\n      super(props);\n\n      let initialState = {\n          \"north\": 0,\n          \"south\": 0,\n          \"west\": 0,\n          \"east\": 0\n      };\n\n      this.state = {sidebar_coords:  initialState,\n                    clean: true,\n                    images: [],\n                    selectedIdx: -1,\n                    maskArray: [],\n                    mask_bounds: []};\n  }\n\n  hoverEnter = (idx) => {\n\n      this.setState({selectedIdx: idx})\n  }\n\n  squareCoords = (coords) => {\n\n      let newState = {\n          \"north\": coords._northEast.lat,\n          \"south\": coords._southWest.lat,\n          \"west\": coords._southWest.lng,\n          \"east\": coords._northEast.lng\n      };\n\n      this.setState(() => {return ({sidebar_coords: newState, clean: false})});\n\n      document.getElementById(\"top\").className = \"xy-button-active\"\n      document.getElementById(\"right\").className = \"xy-button-active\"\n      document.getElementById(\"bottom\").className = \"xy-button-active\"\n      document.getElementById(\"left\").className = \"xy-button-active\"\n\n      return null;\n  }\n\n  cleanAll = () => {\n      const cleanState = {\n          \"north\": 0,\n          \"south\": 0,\n          \"west\": 0,\n          \"east\": 0\n      };\n      this.setState(() => {return ({\n          sidebar_coords: cleanState,\n          clean: true,\n          selectedIdx: -1,\n          images: [],\n          maskArray: [],\n          mask_bounds: []})});\n\n      document.getElementById(\"top\").className = \"xy-button\"\n      document.getElementById(\"right\").className = \"xy-button\"\n      document.getElementById(\"bottom\").className = \"xy-button\"\n      document.getElementById(\"left\").className = \"xy-button\"\n\n      document.getElementById(\"aoi\").classList.remove(\"blocked\")\n\n      return null;\n  }\n\n  prediction = (path) => {\n      doPredict(path).then((res) => {\n\n          let image_data = res.data.image\n          let bbDict = image_data.bounding_box\n          let mask_bounds = [[bbDict.bottom, bbDict.left], [bbDict.top, bbDict.right]]\n          this.setState({maskArray: image_data.masks, mask_bounds: mask_bounds})\n      })\n  }\n\n  selectImage = () => {\n\n      let path = this.state.images[this.state.selectedIdx].path\n      document.getElementById(\"aoi\").classList.remove(\"blocked\")\n\n      doCheckFiles(path).then((res) => {\n\n          let image_data;\n\n          if (res.data.is_located) {\n              image_data = res.data.image\n              let bbDict = image_data.bounding_box\n              let mask_bounds = [[bbDict.bottom, bbDict.left], [bbDict.top, bbDict.right]]\n              this.setState({maskArray: image_data.masks, mask_bounds: mask_bounds})\n          } else {\n              this.prediction(path)\n          }\n\n      })\n\n      return null;\n  }\n\n  selectArea = () => {\n      const top = document.getElementById(\"top\").value\n      const bottom = document.getElementById(\"bottom\").value\n      const left = document.getElementById(\"left\").value\n      const right = document.getElementById(\"right\").value\n\n      doSearchImages(top, bottom, left, right).then((res) => {\n          this.setState({images: res.data.images})\n      } )\n\n      return null\n  }\n\n  render() {\n\n    return (\n        <div>\n            <Sidebar coords={this.state.sidebar_coords}\n                     cleanAll={this.cleanAll}\n                     selectImage={this.selectImage}\n                     selectArea={this.selectArea}\n                     images={this.state.images}\n                     hoverEnter={this.hoverEnter}/>\n            <Map squareCoords={this.squareCoords}\n                 cleanRectangle={this.state.clean}\n                 selectedIdx={this.state.selectedIdx}\n                 images={this.state.images}\n                 maskArray={this.state.maskArray}\n                 mask_bounds={this.state.mask_bounds}/>\n            <h6 className=\"footer\"> </h6>\n        </div>\n    )\n  }\n}\n\nexport default App;\n"],"file":"App.js"}